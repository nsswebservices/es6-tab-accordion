{"version":3,"sources":["attributelist.js","app.js","tab-accordion.js"],"names":[],"mappings":";;AAEC,IAAI,UAAU,SAAV,OAAU,CAAC,EAAD,EAAQ;AACnB,WAAO,YAAW;AACd,YAAI,UAAU,CAAV,MAAiB,OAAO,UAAU,CAAV,CAAP,CAAjB,IAAyC,CAAC,MAAM,OAAN,CAAc,UAAU,CAAV,CAAd,CAA9C,EAA2E;AACvE,iBAAI,IAAI,IAAR,IAAgB,UAAU,CAAV,CAAhB,EAA6B;AACzB,mBAAG,IAAH,CAAQ,IAAR,EAAc,UAAU,CAAV,CAAd,EAA4B,IAA5B,EAAkC,UAAU,CAAV,EAAa,IAAb,CAAlC;AACH;AACJ,SAJD,MAIO,IAAG,MAAM,OAAN,CAAc,UAAU,CAAV,CAAd,CAAH,EAA+B;AAClC,gBAAI,KAAK,UAAU,CAAV,CAAT;AACA,sBAAU,CAAV,EAAa,OAAb,CAAqB,UAAS,CAAT,EAAW;AAC5B,mBAAG,IAAH,CAAQ,IAAR,EAAc,EAAd,EAAkB,CAAlB;AACH,aAFD;AAGH,SALM,MAKA;AACH,eAAG,KAAH,CAAS,IAAT,EAAe,SAAf;AACH;AACJ,KAbD;AAcH,CAfA;;AAiBD,IAAI,gBAAgB;AAChB,SAAK,aAAS,EAAT,EAAa,IAAb,EAAmB;AACpB,gBAAQ,UAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,EAAiB;AACrB,cAAE,YAAF,CAAe,CAAf,EAAkB,CAAlB;AACH,SAFD,EAEG,EAFH,EAEO,IAFP;AAGH,KALe;AAMhB,YAAQ,gBAAS,EAAT,EAAa,IAAb,EAAmB;AACvB,gBAAQ,UAAS,CAAT,EAAY,CAAZ,EAAc;AAClB,cAAE,YAAF,CAAe,CAAf,EAAmB,EAAE,YAAF,CAAe,CAAf,MAAsB,OAAtB,GAAgC,IAAhC,GAAuC,KAA1D;AACH,SAFD,EAEG,EAFH,EAEO,IAFP;AAGH;AAVe,CAApB;;ACWA,IC1BI,YAAY;AACR,YAAQ,EADA;AAER,SAAK;AAFG,CD0BhB;AAIA,IC1BI,gBAAgB,CAAC,OAAD,EAAU,SAAV,EAAqB,YAArB,CD0BpB;AACA,IC1BI,YAAY,ED0BhB;AACA,IC1BI,WAAW;AACP,cAAU,uBADH;AAEP,gBAAY,yBAFL;AAGP,kBAAc,QAHP;AAIP,YAAQ;AAJD,CD0Bf;AAMA,IC1BI,oBAAoB;AAChB,QADgB,kBACT;AACH,aAAK,IAAL,GAAY,GAAG,KAAH,CAAS,IAAT,CAAc,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,KAAK,QAAL,CAAc,QAA/C,CAAd,CAAZ;AACA,aAAK,MAAL,GAAc,GAAG,KAAH,CAAS,IAAT,CAAc,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,KAAK,QAAL,CAAc,UAA/C,CAAd,CAAd;AACA,aAAK,QAAL,GAAgB,KAAK,MAAL,CAAY,MAAZ,CAAmB,KAAK,IAAxB,CAAhB;AACA,aAAK,OAAL,GAAe,KAAK,IAAL,CAAU,GAAV,CAAc,cAAM;AAC/B,mBAAO,SAAS,cAAT,CAAwB,GAAG,YAAH,CAAgB,MAAhB,EAAwB,MAAxB,CAA+B,CAA/B,CAAxB,KAA8D,QAAQ,KAAR,CAAc,sBAAd,CAArE;AACH,SAFc,CAAf;;AAIA,aAAK,OAAL,GAAe,KAAK,QAAL,CAAc,MAA7B;AACA,aAAK,QAAL;AACA,aAAK,YAAL,CAAkB,KAAK,IAAvB;AACA,aAAK,YAAL,CAAkB,KAAK,MAAvB;AACA,aAAK,IAAL,CAAU,KAAK,OAAf;AACH,KAde;AAehB,YAfgB,sBAeL;AACP,aAAK,QAAL,CAAc,OAAd,CAAsB,cAAM;AACxB,0BAAc,GAAd,CAAkB,EAAlB,EAAsB;AAClB,wBAAS,KADS;AAElB,4BAAa,CAFK;AAGlB,iCAAkB,KAHA;AAIlB,iCAAkB,KAJA;AAKlB,iCAAkB,GAAG,YAAH,CAAgB,MAAhB,IAA0B,GAAG,YAAH,CAAgB,MAAhB,EAAwB,MAAxB,CAA+B,CAA/B,CAA1B,GAA8D,GAAG,UAAH,CAAc,YAAd,CAA2B,IAA3B;AAL9D,aAAtB;AAOH,SARD;AASA,aAAK,OAAL,CAAa,OAAb,CAAqB,cAAM;AACvB,0BAAc,GAAd,CAAkB,EAAlB,EAAsB;AAClB,wBAAS,UADS;AAElB,+BAAgB,IAFE;AAGlB,4BAAY;AAHM,aAAtB;AAKH,SAND;AAOA,eAAO,IAAP;AACH,KAjCe;AAkChB,gBAlCgB,wBAkCH,QAlCG,EAkCO;AAAA;;AACnB,YAAI,UAAU,SAAV,OAAU,IAAK;AACf,kBAAK,MAAL,CAAY,CAAZ;AACH,SAFD;;AAIA,iBAAS,OAAT,CAAiB,UAAC,EAAD,EAAK,CAAL,EAAW;AACxB,0BAAc,OAAd,CAAsB,cAAM;AACxB,mBAAG,gBAAH,CAAoB,EAApB,EAAwB,aAAK;AACzB,wBAAG,CAAC,CAAC,EAAE,OAAJ,IAAe,EAAE,OAAF,KAAc,UAAU,GAA1C,EAA+C;AAAE;AAAS;AAC1D,wBAAG,CAAC,CAAC,CAAC,EAAE,OAAL,IAAgB,EAAE,OAAF,KAAc,UAAU,MAA3C,EAAkD;AAC9C,0BAAE,cAAF;AACA,gCAAQ,IAAR,QAAmB,CAAnB;AACH;AACJ,iBAND,EAMG,KANH;AAOH,aARD;AASH,SAVD;;AAYA,eAAO,IAAP;AACH,KApDe;AAqDhB,UArDgB,kBAqDT,IArDS,EAqDH,CArDG,EAqDA;AACZ,YAAI,UAAU;AACV,kBAAM;AACF,2BAAW,KADT;AAEF,0BAAU;AACN,4BAAQ,KAAK,OAAL,CAAa,CAAb,CADF;AAEN,2BAAO;AAFD;AAFR,aADI;AAQV,mBAAO;AACH,2BAAW,QADR;AAEH,0BAAU;AACN,4BAAQ,KAAK,OAAL,CAAa,KAAK,OAAlB,CADF;AAEN,2BAAO;AAFD;AAFP;AARG,SAAd;;AAiBA,aAAK,IAAL,CAAU,CAAV,EAAa,SAAb,CAAuB,QAAQ,IAAR,EAAc,SAArC,EAAgD,KAAK,QAAL,CAAc,YAA9D;AACA,aAAK,MAAL,CAAY,CAAZ,EAAe,SAAf,CAAyB,QAAQ,IAAR,EAAc,SAAvC,EAAkD,KAAK,QAAL,CAAc,YAAhE;AACA,aAAK,OAAL,CAAa,CAAb,EAAgB,SAAhB,CAA0B,QAAQ,IAAR,EAAc,SAAxC,EAAmD,KAAK,QAAL,CAAc,YAAjE;AACA,sBAAc,MAAd,CAAqB,KAAK,OAAL,CAAa,CAAb,CAArB,EAAsC,aAAtC;AACA,sBAAc,MAAd,CAAqB,KAAK,IAAL,CAAU,CAAV,CAArB,EAAmC,CAAC,eAAD,EAAkB,eAAlB,CAAnC;AACA,sBAAc,MAAd,CAAqB,KAAK,MAAL,CAAY,CAAZ,CAArB,EAAqC,CAAC,eAAD,EAAkB,eAAlB,CAArC;AACA,sBAAc,GAAd,CAAkB,QAAQ,IAAR,EAAc,QAAd,CAAuB,MAAzC,EAAiD;AAC7C,wBAAY,QAAQ,IAAR,EAAc,QAAd,CAAuB;AADU,SAAjD;AAGH,KAhFe;AAiFhB,QAjFgB,gBAiFX,CAjFW,EAiFR;AACJ,aAAK,MAAL,CAAY,MAAZ,EAAoB,CAApB;AACA,aAAK,OAAL,GAAe,CAAf;AACA,eAAO,IAAP;AACH,KArFe;AAsFhB,SAtFgB,iBAsFV,CAtFU,EAsFP;AACL,aAAK,MAAL,CAAY,OAAZ,EAAqB,CAArB;AACA,eAAO,IAAP;AACH,KAzFe;AA0FhB,UA1FgB,kBA0FT,CA1FS,EA0FN;AACN,YAAG,KAAK,OAAL,KAAiB,CAApB,EAAuB;AAAE;AAAS;AAClC,YAAG,KAAK,OAAL,KAAiB,IAApB,EAA0B;AACtB,iBAAK,IAAL,CAAU,CAAV;AACA,mBAAO,IAAP;AACH;AACG,aAAK,KAAL,CAAW,KAAK,OAAhB,EACC,IADD,CACM,CADN;AAEJ,eAAO,IAAP;AACH;AAnGe,CD0BxB;AC6EA,IAAI,SAAS,SAAT,MAAS,CAAC,EAAD,EAAK,CAAL,EAAQ,IAAR,EAAiB;AAC1B,cAAU,CAAV,IAAe,OAAO,MAAP,CAAc,OAAO,MAAP,CAAc,iBAAd,CAAd,EAAgD;AAC3D,oBAAY,EAD+C;AAE3D,kBAAU,OAAO,MAAP,CAAc,EAAd,EAAkB,QAAlB,EAA4B,IAA5B;AAFiD,KAAhD,CAAf;AAIA,cAAU,CAAV,EAAa,IAAb;AACH,CAND;;AAQA,IAAI,OAAO,SAAP,IAAO,CAAC,GAAD,EAAM,IAAN,EAAe;AACtB,QAAI,MAAM,GAAG,KAAH,CAAS,IAAT,CAAc,SAAS,gBAAT,CAA0B,GAA1B,CAAd,CAAV;;AAEA,QAAG,IAAI,MAAJ,KAAe,CAAlB,EAAqB;AACjB,cAAM,IAAI,KAAJ,CAAU,mEAAV,CAAN;AACH;;AAED,QAAI,OAAJ,CAAY,UAAC,EAAD,EAAK,CAAL,EAAW;AACnB,eAAO,EAAP,EAAW,CAAX,EAAc,IAAd;AACH,KAFD;AAGA,WAAO,SAAP;AAEH,CAZD;;AAcA,IAAI,SAAS,SAAT,MAAS,CAAC,GAAD,EAAM,IAAN,EAAe;AACxB,OAAG,KAAH,CAAS,IAAT,CAAc,SAAS,gBAAT,CAA0B,GAA1B,CAAd,EAA8C,OAA9C,CAAsD,UAAC,EAAD,EAAK,CAAL,EAAW;AAC7D,YAAG,CAAC,UAAU,MAAV,CAAiB,oBAAY;AAAE,mBAAQ,SAAS,GAAT,KAAiB,EAAzB;AAA+B,SAA9D,EAAgE,MAApE,EAA4E;AACxE,mBAAO,EAAP,EAAW,UAAU,MAArB,EAA6B,IAA7B;AACH;AACJ,KAJD;AAKH,CAND;;AAQA,IAAI,UAAU,SAAV,OAAU,GAAM;AAChB,gBAAY,EAAZ;AACH,CAFD;;AAIA,IAAI,eAAe,EAAE,UAAF,EAAQ,cAAR,EAAgB,gBAAhB,EAAnB;;ADrJA,aAAa,IAAb,CAAkB,mBAAlB","file":"app.js","sourcesContent":["'use strict';\r\n    \r\n let wrapper = (fn) => {\r\n    return function() {\r\n        if (arguments[1] === Object(arguments[1]) && !Array.isArray(arguments[1])) {\r\n            for(var attr in arguments[1]){\r\n                fn.call(null, arguments[0], attr, arguments[1][attr]);\r\n            }\r\n        } else if(Array.isArray(arguments[1])){\r\n            var el = arguments[0];\r\n            arguments[1].forEach(function(a){\r\n                fn.call(null, el, a);\r\n            });\r\n        } else {\r\n            fn.apply(null, arguments);\r\n        }\r\n    };\r\n};\r\n\r\nlet attributelist = {\r\n    set: function(el, attr) {\r\n        wrapper(function(e, a, v){\r\n            e.setAttribute(a, v);\r\n        })(el, attr);\r\n    },\r\n    toggle: function(el, attr) {\r\n        wrapper(function(e, a){\r\n            e.setAttribute(a, (e.getAttribute(a) === 'false' ? true : false));\r\n        })(el, attr);\r\n    }\r\n};\r\n\r\nexport default attributelist;","'use strict';\n\nimport { TabAccordion } from './tab-accordion';\n\nTabAccordion.init('.js-tab-accordion');","'use strict';\n\nimport attributelist from './attributelist'\n\nlet KEY_CODES = {\n        RETURN: 13,\n        TAB: 9\n    },\n    triggerEvents = ['click', 'keydown', 'touchstart'],\n    instances = [],\n    defaults = {\n        tabClass: '.js-tab-accordion-tab',\n        titleClass: '.js-tab-accordion-title',\n        currentClass: 'active',\n        active: 0\n    },\n    StormTabAccordion = {\n        init() {\n            this.tabs = [].slice.call(this.DOMElement.querySelectorAll(this.settings.tabClass));\n            this.titles = [].slice.call(this.DOMElement.querySelectorAll(this.settings.titleClass));\n            this.triggers = this.titles.concat(this.tabs);\n            this.targets = this.tabs.map(el => {\n                return document.getElementById(el.getAttribute('href').substr(1)) || console.error('Tab target not found');\n            });\n                \n            this.current = this.settings.active;\n            this.initAria();\n            this.initTriggers(this.tabs);\n            this.initTriggers(this.titles);\n            this.open(this.current);\n        },\n        initAria() {\n            this.triggers.forEach(el => {\n                attributelist.set(el, {\n                    'role' : 'tab',\n                    'tabIndex' : 0,\n                    'aria-expanded' : false,\n                    'aria-selected' : false,\n                    'aria-controls' : el.getAttribute('href') ? el.getAttribute('href').substr(1) : el.parentNode.getAttribute('id')\n                });\n            });\n            this.targets.forEach(el => {\n                attributelist.set(el, {\n                    'role' : 'tabpanel',\n                    'aria-hidden' : true,\n                    'tabIndex': '-1'\n                });\n            });\n            return this;\n        },\n        initTriggers(triggers) {\n            let handler = i => {\n                this.toggle(i);\n            };\n\n            triggers.forEach((el, i) => {\n                triggerEvents.forEach(ev => {\n                    el.addEventListener(ev, e => {\n                        if(!!e.keyCode && e.keyCode === KEY_CODES.TAB) { return; }\n                        if(!!!e.keyCode || e.keyCode === KEY_CODES.RETURN){\n                            e.preventDefault();\n                            handler.call(this, i);\n                        }\n                    }, false);\n                });\n            });\n\n            return this;\n        },\n        change(type, i) {\n            let methods = {\n                open: {\n                    classlist: 'add',\n                    tabIndex: {\n                        target: this.targets[i],\n                        value: '0'\n                    }\n                },\n                close: {\n                    classlist: 'remove',\n                    tabIndex: {\n                        target: this.targets[this.current],\n                        value: '-1'\n                    }\n                }\n            };\n\n            this.tabs[i].classList[methods[type].classlist](this.settings.currentClass);\n            this.titles[i].classList[methods[type].classlist](this.settings.currentClass);\n            this.targets[i].classList[methods[type].classlist](this.settings.currentClass);\n            attributelist.toggle(this.targets[i], 'aria-hidden');\n            attributelist.toggle(this.tabs[i], ['aria-selected', 'aria-expanded']);\n            attributelist.toggle(this.titles[i], ['aria-selected', 'aria-expanded']);\n            attributelist.set(methods[type].tabIndex.target, {\n                'tabIndex': methods[type].tabIndex.value\n            });\n        },\n        open(i) {\n            this.change('open', i);\n            this.current = i;\n            return this;\n        },\n        close(i) {\n            this.change('close', i);\n            return this;\n        },\n        toggle(i) {\n            if(this.current === i) { return; }\n            if(this.current === null) { \n                this.open(i);\n                return this;\n            }\n                this.close(this.current)\n                .open(i);\n            return this;\n        }\n    };\n\n\t\nlet create = (el, i, opts) => {\n    instances[i] = Object.assign(Object.create(StormTabAccordion), {\n        DOMElement: el,\n        settings: Object.assign({}, defaults, opts)\n    });\n    instances[i].init();\n}\n\nlet init = (sel, opts) => {\n    var els = [].slice.call(document.querySelectorAll(sel));\n    \n    if(els.length === 0) {\n        throw new Error('TabAccordion cannot be initialised, no augmentable elements found');\n    }\n    \n    els.forEach((el, i) => {\n        create(el, i, opts);\n    });\n    return instances;\n    \n}\n\nlet reload = (sel, opts) => {\n    [].slice.call(document.querySelectorAll(sel)).forEach((el, i) => {\n        if(!instances.filter(instance => { return (instance.btn === el); }).length) {\n            create(el, instances.length, opts);\n        }\n    });\n}\n\nlet destroy = () => {\n    instances = [];  \n}\n\nlet TabAccordion = { init, reload, destroy }\n\nexport { TabAccordion };"],"sourceRoot":"/source/"}